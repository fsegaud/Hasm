@require registers 4
@require stack 2
@require devices 1
#@require memory 8

# Test addition, stack, jumps, aliases, devices.

main:
    # variables
    alias $a r0
    alias $b r1
    alias $screen_device d0.0

    # declare values
    mov $a 2
    mov $b 3
    
    # push values
    push $a
    push $b
    
    # call function
    jal f_add
    
    # pop and test result
    pop $a
    assert $a 5
    
    # store on device
    mov $screen_device $a
    
    ret 

f_add:
    pop r3
    pop r2
    add r2 r2 r3
    push r2
    j ra
